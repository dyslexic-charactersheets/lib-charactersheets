@use "common";

/**
 * Copyright 2025 Marcus Downing
 * Licensed under the Artistic License 2.0
 */

/* Tables */

table {
  // width: 100%;
  border-collapse: separate;
  border-spacing: 0;
  // @include elementMargin;

  &:last-child {
    margin-bottom: 0;
  }

  th:first-child {
    text-align: left;
  }

  th,
  td {
    font-weight: normal;
    margin: 0;
    padding: common.$pt;
    text-align: center;
    vertical-align: bottom;

    span {
      font-size: 1rem;
      // line-height: 2.2rem;
    }

    h6 {
      margin-left: 3 * common.$pt;
      line-height: 2.2rem;
    }

    p {
      margin: common.$pt 0;
      min-height: 1.3rem;
      &, span, span.p__content {
        line-height: 1.3rem;
      }
    }

    .field, > .field {
      margin-left: auto;
      margin-right: auto;

      &.align_left {
        margin-left: 0;
      }

      &.align_right {
        margin-right: 0;
      }
    }

    > .field--width_stretch {
      input,
      output {
        width: 100%;
      }
    }

    &.align_left {
      text-align: left;
    }

    &.align_centre {
      text-align: center;
    }

    &.align_right {
      text-align: right;
    }

    &.valign_top {
      vertical-align: top;
    }

    &.valign_middle {
      vertical-align: middle;
    }
  }

  // .th--vr,
  .td--vr {
    border-left: common.$pt solid #808080;
  }

  tr.tr--hr {
    td,
    th {
      border-top: common.$pt solid #808080;
    }
  }

  $cell_width: 4rem;

  @mixin cell_width($name, $width) {
    th.th--width_#{$name}, td.td--width_#{$name} {
      width: $width;
    }
  }
  
  @include cell_width("tiny", 0.4 * $cell-width);
  @include cell_width("small", 0.6 * $cell-width);
  @include cell_width("medium", $cell-width);
  @include cell_width("large", 1.25 * $cell-width);
  @include cell_width("huge", 1.5 * $cell-width);
  // @include field_width("gargantuan", 3 * $cell-width);

  &.table--collapse {
    border-collapse: collapse;
    th {
      padding: 0;
      padding-bottom: 0.7 * common.$pt;
    }
    td {
      padding: 0;

      .field {
        margin-top: -0.38 * common.$pt;
        margin-bottom: -0.38 * common.$pt;
      }

      > span {
        line-height: 1.6rem;
      }

      h6 {
        line-height: 1.6rem;
      }

      .level-marker {
        vertical-align: middle;
      }
    }
  }

  &.table--width_stretch {
    width: 100%;
  }

  &.table--layout_2r {
    table-layout: fixed;
    td {
      &:nth-child(1) {
        width: 62%;
      }
      &:nth-child(2) {
        width: 38%;
      }
    }
  }
  &.table--layout_2r-80-20 {
    table-layout: fixed;
    td {
      &:nth-child(1) {
        width: 80%;
      }
      &:nth-child(2) {
        width: 20%;
      }
    }
  }

  &.table--flip {
    th, td {
      vertical-align: middle;
    }
  }
}
